# YouTube Downloader

## Описание

**YouTube Downloader** — это веб-приложение для загрузки видео и аудио с YouTube. Пользователь может ввести URL видео, выбрать тип файла (аудио в формате MP3 или видео в формате MP4 с лучшим доступным качеством), после чего задача добавляется в очередь на обработку. Приложение отображает таблицу задач с информацией о ссылке, названии видео, статусе и предоставляет ссылку для скачивания готового файла.

Основные возможности:
- Асинхронная обработка задач с использованием очередей RabbitMQ.
- Параллельная загрузка нескольких видео благодаря масштабируемым worker'ам.
- Веб-интерфейс с таблицей задач (URL, название, статус, кнопка скачивания).
- Название видео отображается сразу после получения метаданных, до завершения загрузки.
- Поддержка Docker для удобного деплоя.
---

## Технологии

Проект использует следующие технологии и инструменты:
- **Python 3.11**: Основной язык программирования.
- **FastAPI**: Асинхронный веб-фреймворк для API и веб-интерфейса.
- **yt-dlp**: Библиотека для загрузки видео и аудио с YouTube.
- **RabbitMQ**: Очередь сообщений для асинхронной обработки задач.
- **Redis**: Хранилище для отслеживания статуса задач.
- **Jinja2**: Шаблонизатор для генерации HTML-страниц.
- **Docker & Docker Compose**: Контейнеризация и оркестрация сервисов.
- **HTML/CSS/JavaScript**: Веб-интерфейс с минималистичным дизайном.
- **FFmpeg**: Для постобработки файлов (например, конвертации в MP3).

---

## Структура проекта
```
youtube_downloader/
├── app/
│   ├── api/
│   │   └── routes.py         # Маршруты API
│   ├── core/
│   │   ├── config.py        # Конфигурация
│   │   └── downloader.py    # Логика загрузки с yt-dlp
│   ├── models/
│   │   └── task.py          # Модель задачи
│   ├── services/
│   │   └── queue_service.py # Сервис очередей RabbitMQ
│   ├── static/
│   │   ├── style.css        # Стили для веб-интерфейса
│   │   └── script.js        # Логика фронтенда
│   ├── templates/
│   │   └── index.html       # Шаблон главной страницы
│   ├── main.py              # Точка входа FastAPI
│   └── worker.py            # Worker для обработки задач из очереди
├── Dockerfile               # Docker-файл для сборки образа
├── docker-compose.yml       # Конфигурация сервисов
├── requirements.txt         # Зависимости Python
└── README.md                # Документация


```

## Установка и запуск

1. Убедитесь, что у вас установлены **Docker** и **Docker Compose**.
2. Клонируйте репозиторий:
   ```
   git clone clone https://github.com/yourusername/youtube-downloader.git
   ```
3. Перейдите в директорию проекта:
   ```
   cd youtube-downloader
   ```
4. Запустите приложение с помощью Docker Compose:
   ```
   docker-compose up --build
   ```
   - Это создаст и запустит три сервиса: app (FastAPI), worker (3 экземпляра для обработки задач), rabbitmq и redis.

5. После успешного запуска откройте приложение в браузере:
   [http://localhost:8000](http://localhost:8000)

---

## Как использовать
- Введите URL видео YouTube в поле ввода.
- Выберите тип файла: "Audio (MP3)" или "Video (Best Quality)".
- Нажмите "Add" для добавления задачи.
- Следите за статусом в таблице: URL, название видео (появляется сразу после обработки метаданных), статус и кнопка "
  Download" (появляется после завершения).
---

## Дополнительные команды
- Просмотр логов worker'а: ```docker logs youtube_downloader-worker-1```
- Панель управления RabbitMQ: 
   - Доступна по адресу: http://localhost:15672 (логин/пароль: guest/guest)
---

## Настройка
- Количество worker'ов: Измените replicas в docker-compose.yml (по умолчанию 3).
- Параллельные задачи в worker'е: Настройте prefetch_count в app/worker.py (по умолчанию 3).
- Поддерживаемые форматы: Измените SUPPORTED_FORMATS в app/core/config.py.
---

## Ограничения
- Для видео всегда используется лучшее доступное качество (без выбора разрешения).
- Загрузка может быть ограничена политиками YouTube (например, для защищённых видео).
- Производительность зависит от ресурсов сервера и скорости интернета.


---


## Автор

Создано [gressaggr]  
GitHub: [https://github.com/gresaggr](ttps://github.com/gresaggr)  
